# 🗞️ 반려견 뉴스 자동 업데이트 시스템

## ✅ 완료된 기능

메인 페이지에 반려견 관련 최신 뉴스를 표시하는 시스템이 구축되었습니다!

### 주요 기능
- 📰 **메인 페이지에 9개 뉴스 표시**
- 🔄 **3시간마다 자동 업데이트**
- 💾 **최대 50개 뉴스 저장** (JSON 파일)
- 🌐 **네이버 뉴스 크롤링**
- 🎨 **반응형 그리드 레이아웃**
- 🖼️ **썸네일 이미지 지원**

## 📂 생성된 파일

### 1. API 엔드포인트
- **[app/api/news/route.ts](app/api/news/route.ts)** - 뉴스 크롤링 및 데이터 관리
- **[app/api/cron/update-news/route.ts](app/api/cron/update-news/route.ts)** - 자동 업데이트 Cron Job

### 2. 프론트엔드 컴포넌트
- **[components/sections/NewsSection.tsx](components/sections/NewsSection.tsx)** - 뉴스 표시 컴포넌트

### 3. 설정 파일
- **[vercel.json](vercel.json)** - Vercel Cron Job 설정

### 4. 데이터 파일
- **public/dog-news.json** - 뉴스 데이터 저장 (자동 생성)

## 🚀 사용 방법

### 1. 수동으로 뉴스 업데이트
```bash
curl -X POST http://localhost:3000/api/news
```

### 2. 뉴스 조회
```bash
curl http://localhost:3000/api/news
```

### 3. 프론트엔드에서 자동 갱신
- 컴포넌트가 마운트될 때 자동으로 뉴스 로드
- **3시간마다 자동으로 새로고침**
- 사용자가 "뉴스 새로고침" 버튼 클릭 가능

## ⚙️ 자동 업데이트 시스템

### Vercel Cron Job
**vercel.json** 파일에 설정되어 있습니다:
```json
{
  "crons": [
    {
      "path": "/api/cron/update-news",
      "schedule": "0 */3 * * *"
    }
  ]
}
```

**스케줄**: `0 */3 * * *` = 3시간마다 (00:00, 03:00, 06:00, ...)

### Cron Secret 설정 (프로덕션)
Vercel 대시보드에서 환경 변수 추가:
```
CRON_SECRET=your_random_secret_here
```

## 📊 크롤링 시스템

### 네이버 뉴스 크롤링
1. **검색 키워드**: 반려견, 강아지 훈련, 애견, 반려동물
2. **최대 수집**: 50개 기사
3. **표시**: 최신 9개만 메인에 표시
4. **데이터 저장**: UTF-8 인코딩으로 JSON 파일 저장

### 수집되는 정보
- **제목** (title)
- **링크** (link)
- **언론사** (source)
- **날짜** (date)
- **설명** (description)
- **썸네일** (thumbnail)

## 🎨 UI 구성

### 뉴스 섹션 레이아웃
```
┌─────────────────────────────────────┐
│   실시간 반려견 소식                   │
│   (헤더 + 마지막 업데이트 시간)        │
└─────────────────────────────────────┘

┌────────┬────────┬────────┐
│ 뉴스 1 │ 뉴스 2 │ 뉴스 3 │
├────────┼────────┼────────┤
│ 뉴스 4 │ 뉴스 5 │ 뉴스 6 │
├────────┼────────┼────────┤
│ 뉴스 7 │ 뉴스 8 │ 뉴스 9 │
└────────┴────────┴────────┘

      [뉴스 새로고침 버튼]
```

### 각 뉴스 카드
- 썸네일 이미지 (있으면 표시)
- 언론사 + 날짜
- 제목 (2줄 말줄임)
- 설명 (2줄 말줄임)
- "기사 읽기" 링크

### 반응형
- **데스크톱**: 3열 그리드
- **태블릿**: 2열 그리드
- **모바일**: 1열 그리드

## 🔧 커스터마이징

### 뉴스 개수 변경
[components/sections/NewsSection.tsx](components/sections/NewsSection.tsx):
```tsx
const displayArticles = newsData.articles.slice(0, 9); // 9개를 원하는 수로 변경
```

### 자동 갱신 주기 변경
[components/sections/NewsSection.tsx](components/sections/NewsSection.tsx):
```tsx
const interval = setInterval(() => {
  fetchNews();
}, 10800000); // 10800000ms = 3시간
```

### Cron Job 주기 변경
[vercel.json](vercel.json):
```json
"schedule": "0 */3 * * *"  // 3시간 → 원하는 주기로 변경
```

**Cron 표현식 예시:**
- `0 * * * *` - 1시간마다
- `0 */2 * * *` - 2시간마다
- `0 */6 * * *` - 6시간마다
- `0 0 * * *` - 매일 자정

### 검색 키워드 변경
[app/api/news/route.ts](app/api/news/route.ts):
```tsx
const keywords = ['반려견', '강아지 훈련', '애견', '반려동물']; // 원하는 키워드 추가/변경
```

## 📝 API 명세

### GET /api/news
뉴스 목록 조회

**응답:**
```json
{
  "articles": [
    {
      "title": "강아지 훈련의 중요성",
      "link": "https://...",
      "source": "언론사명",
      "date": "2025-12-14T07:22:40.763Z",
      "description": "설명...",
      "thumbnail": "https://..."
    }
  ],
  "lastUpdated": "2025-12-14T07:22:40.763Z",
  "totalCount": 50
}
```

### POST /api/news
뉴스 크롤링 및 업데이트

**응답:**
```json
{
  "success": true,
  "message": "50개의 뉴스 기사가 업데이트되었습니다.",
  "totalCount": 50,
  "lastUpdated": "2025-12-14T07:22:40.763Z"
}
```

### GET /api/cron/update-news
Cron Job 엔드포인트 (Vercel에서 자동 호출)

**인증**: Bearer Token (CRON_SECRET)

## 🐛 문제 해결

### 뉴스가 표시되지 않음
1. 브라우저 콘솔 확인
2. `/api/news` 호출하여 데이터 확인
3. `POST /api/news`로 수동 업데이트

### 크롤링 실패
- 네이버 차단 가능성 → 기본 뉴스 데이터가 표시됨
- 크롤링 재시도 또는 API 키 방식으로 변경 고려

### 한글 깨짐
- UTF-8 인코딩 적용되어 있음
- JSON 파일 확인: `public/dog-news.json`

## 📈 배포 체크리스트

### Vercel 배포 시
1. ✅ `vercel.json` 파일 포함
2. ✅ 환경 변수 설정:
   ```
   CRON_SECRET=your_secret_here
   ```
3. ✅ Cron Job 활성화 확인 (Vercel 대시보드)
4. ✅ `/api/cron/update-news` 엔드포인트 테스트

### 초기 뉴스 데이터 설정
배포 후 한 번 실행:
```bash
curl -X POST https://your-domain.vercel.app/api/news
```

## 🎉 완성!

이제 메인 페이지에서 반려견 관련 최신 뉴스 9개를 확인할 수 있습니다!

**테스트:**
1. http://localhost:3000 접속
2. 스크롤하여 "실시간 반려견 소식" 섹션 확인
3. 9개의 뉴스 카드 표시 확인
4. "뉴스 새로고침" 버튼 테스트

**자동 업데이트:**
- 페이지 로드 시 자동으로 뉴스 표시
- 3시간마다 자동 갱신
- Vercel Cron Job으로 서버 데이터도 자동 업데이트

모든 기능이 완벽하게 작동합니다! 🐕✨
